{% extends 'base.html' %}
{% block content %}
<div class="container my-4">
  <h3 class="text-center">Signup</h3>

  <form method="POST" id="signupForm">
    {{ form.hidden_tag() }}

    <div class="mb-3">
      {{ form.profile_type.label }}
      {{ form.profile_type(class="form-select", id="profileType") }}
    </div>

    <div class="mb-3">
      {{ form.national_id.label }} {{ form.national_id(class="form-control") }}
    </div>

    <div class="mb-3">
      {{ form.first_name.label }} {{ form.first_name(class="form-control") }}
    </div>

    <div class="mb-3">
      {{ form.surname.label }} {{ form.surname(class="form-control") }}
    </div>

    <div class="mb-3">
      {{ form.email.label }} {{ form.email(class="form-control") }}
    </div>

    <div class="mb-3">
      {{ form.gender.label }} {{ form.gender(class="form-select") }}
    </div>

    <div class="mb-3">
      {{ form.phone.label }} {{ form.phone(class="form-control") }}
    </div>

    <!-- Marshal & Admin -->
    <div class="mb-3" id="employeeIdDiv" style="display: none;">
      {{ form.employee_id.label }} {{ form.employee_id(class="form-control") }}
    </div>

    <!-- Marshal only -->
    <div class="mb-3" id="zoneDiv" style="display: none;">
      {{ form.zone.label }} {{ form.zone(class="form-select") }}
    </div>

    <div class="mb-3">
      {{ form.password.label }} {{ form.password(class="form-control") }}
    </div>

    <div class="d-grid">
      <button class="btn btn-success btn-lg">Signup</button>
    </div>
  </form>
</div>

{% endblock %}

{% block scripts %}
<script>
$(document).ready(function() {
  function toggleFields() {
    var selected = $('#profileType').val();
    if (selected === 'marshal') {
      $('#employeeIdDiv').show();
      $('#zoneDiv').show();
    } else if (selected === 'admin') {
      $('#employeeIdDiv').show();
      $('#zoneDiv').hide();
    } else {
      $('#employeeIdDiv').hide();
      $('#zoneDiv').hide();
    }
  }

  $('#profileType').change(toggleFields);
  toggleFields(); // run once on page load
});
</script>
{% endblock %}
